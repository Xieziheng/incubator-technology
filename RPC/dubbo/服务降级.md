# 服务降级

> 在进行dubbo服务调用时可能会由于各种原因导致服务调用失败（RpcException）
dubbo服务降级就是指在由于非业务异常导致的服务不可用时，可以返回默认值，避免异常影响主业务的处理。

##dubbo服务降级
dubbo 本省就提供了服务降级方案：在消费着配置 check=false 并使用mock 即可在服务不可用的时候返回null，如下图：
![-w921](./img/15450399588413/15452888282043.jpg)
或者在dubbo monitor里配置：
![-w1292](./img/15450399588413/15452895526351.jpg)
配置后dubbo monitor 如下
![-w1033](./img/15450399588413/15452888772847.jpg)
来看看调用不可用服务dubbo返回的结果
![-w1404](./img/15450399588413/15452892065428.jpg)
所以同志们不要以为soa层一定会返回东西，空指针老老实实处理掉

##关于check health 失败导致服务告警的降级方案
![-w682](./img/15450399588413/15452891797852.jpg)
DubboHealthIndicator 处理这个逻辑很简单
![-w706](./img/15450399588413/15452897840124.jpg)
如果没有配置，会从bean服务提取此服务，拿不到就报服务不可用异常
![-w905](./img/15450399588413/15452918338900.jpg)
如何获取dubb服务的bean？
![-w1339](./img/15450399588413/15452919804664.jpg)
dubbo的bean又是如何被发现服务不可用呢
![](./img/15450399588413/15452921677266.jpg)
实现了ApplicationListener的类都会被动态通知
![](./img/15450399588413/15452922957231.jpg)
start方法做了服务暴露（剩下的就是服务暴露原理，此处不讲）